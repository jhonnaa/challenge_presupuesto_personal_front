<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balance de ingresos</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <h1>TU PRESUPUESTO PERSONAL</h1>

<div class="cont-list">
    Vacio
</div>


<button class="btn-add" onClick={mostrarForm}>
    +
</button>

<div className='cont-form'>

<form  id='myForm'>
        <label for="concept">Concepto</label>
        <input  type="text" name="concept" id="concept"/>

        <label for="mount">Monto</label>
        <input  type="number" name="mount" id="mount"/>

        <label for="date">fecha</label>
        <input  type="date" name="date" id="date"/>

        <label for="type">tipo</label>
        <select name="type" id="type">
            <option value="tipo"> Seleccione tipo de ingreso</option>
            <option value="ingreso">ingreso</option>
            <option value="egreso">Egreso</option>
        </select>

        <button type='submit' className='submit' >agregar</button>
    </form>


</div>


<script>

        llamar()
        const myForm = document.querySelector("#myForm")
        myForm.addEventListener("submit", function(event){
            //event.preventDefault()

            agrearLista()
            

            
    })
    async function llamar(){
            fetch('http://localhost:3008/transaction')
            .then(x=>x.json())
            .then(datos=> {
                const lista = document.querySelector('.cont-list')
                lista.innerHTML = JSON.stringify(datos)
                const nuevoDiv = document.createElement('div')
                nuevoDiv.classList.add("item-list")
                lista.appendChild(nuevoDiv)
            })
        }
        async function agrearLista(){
            let myConcept = document.getElementById('concept').value;
            let myMount = document.getElementById('mount').value;
            let myDate = document.getElementById('date').value;
            let myType = document.getElementById('type').value;
            const myTransaction ={
                concept:myConcept, 
                mount: myMount,
                date: myDate,
                type: myType
            }
             await fetch('http://localhost:3008/transaction',{
                method:"POST",
                headers:{"Content-type":"application/json"},
                body: JSON.stringify(myTransaction)
        
            })
            
        } 
    
        

</script>




</body>
</html>